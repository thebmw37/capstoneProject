<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="md_css.css">
    <link rel="stylesheet" href="messages_css.css">
    
    <title>Messages</title>
</head>
<body>
    <div class="grid">
        <header class="header">
          <i class="fas fa-bars header__menu"></i>

          <div class="header__search">
            <form action="md.html" method="GET" id="frmSearch" class="srch">
            <!-- <input class="header__input" id = "txtSearch" placeholder="Search..." /> -->
            </form>
          </div>
  
          <div class="header__avatar">
            <div class="dropdown">
              <ul class="dropdown__list">
                <li class="dropdown__list-item">
                  <span class="dropdown__icon"><i class="far fa-user"></i></span>
                  <a href="profile.html"><span class="dropdown__title">my profile</span></a>
                </li>
                <!-- <li class="dropdown__list-item">
                  <span class="dropdown__icon"><i class="fas fa-clipboard-list"></i></span>
                  <span class="dropdown__title">my account</span>
                </li> -->
                <li class="dropdown__list-item">
                  <span class="dropdown__icon"><i class="fas fa-sign-out-alt"></i></span>
                  <a href="https://www.penguindocketing.com"><span class="dropdown__title">log out</span></a>
                </li>
              </ul>
            </div>
          </div>
        </header>
      
        <aside class="sidenav">
          <div class="sidenav__brand">
            <i class="fas fa-feather-alt sidenav__brand-icon"></i>
            <a class="sidenav__brand-link" href="https://www.penguindocketing.com">PDS LLC<span class="text-light"></span></a>
            <i class="fas fa-times sidenav__brand-close"></i>
          </div>
          <div class="sidenav__profile">
            <div class="sidenav__profile-avatar"></div>
            <div class="sidenav__profile-title text-light">John D.</div>
          </div>
          <div class="row row--align-v-center row--align-h-center">
            <ul class="navList">
              <li class="navList__heading">Messages<i class="far fa-file-alt"></i></li>
                <li>
                <div class="navList__subheading row row--align-v-center">
                  <span class="navList__subheading-icon"><i class="fas fa-briefcase-medical"></i></span>
                  <span class="navList__subheading-title">More Functionality coming soon</span>
                </div>
                <!-- <ul class="subList subList--hidden">
                  <li class="subList__item">New</li>
                  <li class="subList__item">Inbox</li>
                  <li class="subList__item">Create New</li>
                </ul> -->
              </li>
              <li>
                <!-- <div class="navList__subheading row row--align-v-center">
                  <span class="navList__subheading-icon"><i class="fas fa-plane-departure"></i></span>
                  <span class="navList__subheading-title">Create New</span>
                </div> -->
                <!-- <ul class="subList subList--hidden">
                  <li class="subList__item">Active</li>
                  <li class="subList__item">Completed</li>
                  <li class="subList__item">Received</li>
                </ul> -->
              </li>
              <li>
                <!-- <div class="navList__subheading row row--align-v-center">
                  <span class="navList__subheading-icon"><i class="far fa-angry"></i></span>
                  <span class="navList__subheading-title">Case Reminders</span>
                </div> -->
                <!-- <ul class="subList subList--hidden">
                  <li class="subList__item">Applications Started</li>
                  <li class="subList__item">Applications Done</li>
                </ul> -->
              </li>
      
            
                </li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading"><i class="fas fa-calendar-alt"></i></li>
                <li class="navList__heading">Help â€¢ Contact<i class="fas fa-calendar-alt"></i></li>
                <li>
                  <div class="navList__subheading row row--align-v-center">
                    <span class="navList__subheading-icon"><i class="fas fa-wine-glass-alt"></i></span>
                    <span class="navList__subheading-title">Contact</span>
                  </div>
                  <!-- <ul class="subList subList--hidden">
                    <li class="subList__item">Add/Delete</li>
                    <li class="subList__item">Add/Delete</li>
                    <li class="subList__item">Add/Delete</li>
                  </ul> -->
                </li>
                <li>
                  <div class="navList__subheading row row--align-v-center">
                    <span class="navList__subheading-icon"><i class="fas fa-school"></i></span>
                    <span class="navList__subheading-title">Support</span>
                  </div>
                  <!-- <ul class="subList subList--hidden">
                    <li class="subList__item">Add/Delete</li>
                    <li class="subList__item">Add/Delete</li>
                    <li class="subList__item">Add/Delete</li>
                  </ul> -->
                </li>

              
            </ul>
          </div>
        </aside>
        <div id="app">
            <div class="header1">
                        <h3 id="header-content1">Inbox</h3>
                      </div>
            <div class="list">
              <p class="list-heading">Messages</p>
              <div class="list-item">
                <img src="https://i.pravatar.cc/10?img=4" />
                <div class="list-item-body">
                  <p>John Smith</p>
                  <p>Brunch this weekend?</p>
                </div>
              </div>
            </div>
            <div class="details-view">
              <h3 class="detail-heading">Summer BBQ</h3>
              <div class="sender">
                <img id="sender-image" src="https://picsum.photos/10" />
                <div class="list-item-body" id="message-details">
                  <p>John Smith</p>
                  <p>To Alex, Scott, Jennifer</p>
                </div>
              </div>
              <div class="message-body">
                Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet Lorem ipsum
                dolor sit amet Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet
                Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet Lorem ipsum
                dolor sit amet Lorem ipsum dolor sit amet.
              </div>
            </div>
          </div>
          <script>

              const list = document.querySelector(".list");
              const detailsView = document.querySelector(".details-view");
            const headerRef = document.querySelector("#header-content1");

            const listItem = document.querySelector(".list-item");

            for (let i = 2; i < 10; i++) {
            let newListItem = listItem.cloneNode(true);
            newListItem.childNodes[1].src = `https://i.pravatar.cc/10?img=${i}`;
            newListItem.childNodes[3].innerHTML = `
            <p>User ${i}</p>
            <p>Message Content ${i}</p>`;
            list.appendChild(newListItem);
            }

            const storeCardInfo = {
            img: null,
            sender: "John Smith",
            subject: "Summer BBQ Party",
            reciepients: ["Alex, Mars"],
            body: "Lorem ipsum dolor sit amet."
            };

            let bounds = {};
            let scaleX, scaleY;
            let selectedCard;

            list.addEventListener("click", ({ target }) => {
            selectedCard = target.closest(".list-item");
            bounds = selectedCard.getBoundingClientRect();
            scaleX = bounds.width / window.innerWidth;
            scaleY = bounds.height / window.innerHeight;
            console.log("Values while expanding: ", bounds, scaleX, scaleY);
            storeCardInfo.img = selectedCard.childNodes[1].src;
            let senderImage = document.querySelector("#sender-image");
            let messageDetails = document.querySelector("#message-details");
            senderImage.src = selectedCard.childNodes[1].src;
            messageDetails.innerHTML = selectedCard.childNodes[3].innerHTML;
            headerRef.innerHTML = "Close";
            // Similarly get data for sender name, subject
            detailsView.classList.add("opened");

            detailsView.animate(
                [
                {
                    transform: `translate(${bounds.left}px, ${bounds.top}px) scale(${scaleX}, ${scaleY})`
                },
                {
                    transform: `translate(0, 0) scale(1,1)`
                }
                ],
                {
                duration: 300,
                fill: "forwards",
                easing: "cubic-bezier(0.4, 0, 0.2, 1)"
                }
            );
            });

            headerRef.addEventListener("click", ({ target }) => {
            console.log("clicked header");
            if (headerRef.innerHTML === "Close") {
                detailsView.classList.remove("opened");
                headerRef.innerHTML = "Inbox";
                detailsView.animate(
                [
                    {
                    transform: `translate(0, 0) scale(1,1)`
                    },
                    {
                    transform: `translate(${bounds.left}px, ${bounds.top}px) scale(${scaleX}, ${scaleY})`
                    }
                ],
                {
                    duration: 300,
                    fill: "backwards",
                    easing: "cubic-bezier(0.4, 0, 0.2, 1)"
                }
                );
            }
            });

          </script>
      
        
      
        <footer class="footer">
          <p><span class="footer__copyright"></span> 2020 PDS LLC</p>
        </footer>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
            /* Scripts for css grid dashboard */
      
      $(document).ready(() => {
        addResizeListeners();
        setSidenavListeners();
        setUserDropdownListener();
        setMenuClickListener();
        setSidenavCloseListener();
      });
      
      // Set constants and grab needed elements
      const sidenavEl = $('.sidenav');
      const gridEl = $('.grid');
      const SIDENAV_ACTIVE_CLASS = 'sidenav--active';
      const GRID_NO_SCROLL_CLASS = 'grid--noscroll';
      
      function toggleClass(el, className) {
        if (el.hasClass(className)) {
          el.removeClass(className);
        } else {
          el.addClass(className);
        }
      }
      
      // User avatar dropdown functionality
      function setUserDropdownListener() {
        const userAvatar = $('.header__avatar');
      
        userAvatar.on('click', function(e) {
          const dropdown = $(this).children('.dropdown');
          toggleClass(dropdown, 'dropdown--active');
        });
      }
      
      // Sidenav list sliding functionality
      function setSidenavListeners() {
        const subHeadings = $('.navList__subheading'); console.log('subHeadings: ', subHeadings);
        const SUBHEADING_OPEN_CLASS = 'navList__subheading--open';
        const SUBLIST_HIDDEN_CLASS = 'subList--hidden';
      
        subHeadings.each((i, subHeadingEl) => {
          $(subHeadingEl).on('click', (e) => {
            const subListEl = $(subHeadingEl).siblings();
      
            // Add/remove selected styles to list category heading
            if (subHeadingEl) {
              toggleClass($(subHeadingEl), SUBHEADING_OPEN_CLASS);
            }
      
            // Reveal/hide the sublist
            if (subListEl && subListEl.length === 1) {
              toggleClass($(subListEl), SUBLIST_HIDDEN_CLASS);
            }
          });
        });
      }
      
      function toggleClass(el, className) {
        if (el.hasClass(className)) {
          el.removeClass(className);
        } else {
          el.addClass(className);
        }
      }
      
      // If user opens the menu and then expands the viewport from mobile size without closing the menu,
      // make sure scrolling is enabled again and that sidenav active class is removed
      function addResizeListeners() {
        $(window).resize(function(e) {
          const width = window.innerWidth; console.log('width: ', width);
      
          if (width > 750) {
            sidenavEl.removeClass(SIDENAV_ACTIVE_CLASS);
            gridEl.removeClass(GRID_NO_SCROLL_CLASS);
          }
        });
      }
      
      // Menu open sidenav icon, shown only on mobile
      function setMenuClickListener() {
        $('.header__menu').on('click', function(e) { console.log('clicked menu icon');
          toggleClass(sidenavEl, SIDENAV_ACTIVE_CLASS);
          toggleClass(gridEl, GRID_NO_SCROLL_CLASS);
        });
      }
      
      // Sidenav close icon
      function setSidenavCloseListener() {
        $('.sidenav__brand-close').on('click', function(e) {
          toggleClass(sidenavEl, SIDENAV_ACTIVE_CLASS);
          toggleClass(gridEl, GRID_NO_SCROLL_CLASS);
        });
      }
      
        </script>
      </div>
</body>
</html>